<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<section src="meta.html" />
		<!-- Explicit Content-Security-Policy is required for the GoodLoop app why?? -->
		<meta http-equiv="Content-Security-Policy" content="default-src * gap://ready file:; style-src 'self' 'unsafe-inline' *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; media-src * 'self' data: https: http:; img-src * data: 'unsafe-inline'; connect-src * data: 'unsafe-inline'; frame-src * 'unsafe-inline' 'unsafe-eval';" />  
		<link rel="manifest" href="/manifest.webmanifest">
		<meta name="theme-color" content="#770f00">
		<title>$title</title>
		<link rel="shortcut icon" href="/favicon-32.png" />

		<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

		<link rel="stylesheet" type="text/css" href="/build/style/main.css?ord=$cachebuster" >

		<!-- We have cookiehub Already -->
		<!-- <script data-key="$2y$10$GYShWq7Mlj51AJx8DRYwC.XDQE.ptoT9IHUZMtgneqKbl8IWDCc/." data-name="CookieXray" src="https://seersco.com/script/cb.js" type="text/javascript"></script> -->
		
	</head>
	<body>
		
		<div id="mainDiv">
			$contents
		</div>
		
		<!-- everything comes via webpack -->
		<script>
			// Insert bundle[-debug].js - but allow dynamic test/production build switch.
			// Default to debug build on test and local servers.
			window.isDebug = window.location.hostname.match(/^local/) || window.location.hostname.match(/^test/) || window.location.hostname.match(/^stage/);
			
			// Has the user specified debug/production build with a URL param?
			const debugParam = window.location.search.match(/debug=(\w+)/i);
			if (debugParam && debugParam[1]) {
				// Require an exact match to change from default
				if (debugParam[1] === 'false') isDebug = false;
				else if (debugParam[1] === 'true') isDebug = true;
			}
			
			let filename = isDebug ? 'bundle-debug.js' : 'bundle.js';
			filename += "?ord=$cachebuster"; // see MetaHtmlServlet NB: ord is arbitrary but its the parameter name suggested by DoubleClick
			// The cachebuster comes from version.properties info on the last git commit. That is made by bob when building the java code.
			// so run `bob` to update it outside of a normal build.
			document.write('<script src="/build/js/' + filename + '"/><\/script>');
		</script>

		<script type="text/javascript">
			var cpm = {};
			(function(h,u,b){
			var d=h.getElementsByTagName("script")[0],e=h.createElement("script");
			e.async=true;e.src='https://cookiehub.net/c2/1ac697d7.js';
			e.onload=function(){u.cookiehub.load(b);}
			d.parentNode.insertBefore(e,d);
			})(document,window,cpm);
		</script>
		<section src="google-tag-manager.html" />
	</body>
</html>
